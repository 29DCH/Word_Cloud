#-*-coding:utf-8-*-
import re
from imp import reload

import requests
import json
from bs4 import BeautifulSoup #使用了这个包来解析文件
import sys
reload(sys)
sys.setdefaultencoding('utf-8')
import HTMLParser
#格式化html输出
def htmlparser():
    html="[ti&#58;床边故事]&#10;[ar&#58;周杰伦]&#10;[al&#58;]&#10;[by&#58;]&#10;[offset&#58;0]&#10;[00&#58;02&#46;06]床边故事&#32;&#45;&#32;周杰伦&#10;[00&#58;05&#46;87]词：方文山&#10;[00&#58;08&#46;38]曲：周杰伦&#10;[00&#58;10&#46;70]&#10;[00&#58;22&#46;43]从前从前有只猫头鹰&#10;[00&#58;23&#46;92]牠站在屋顶&#10;[00&#58;24&#46;79]屋顶后面一遍森林&#10;[00&#58;26&#46;35]森林很安静&#10;[00&#58;27&#46;17]安静的钢琴在大厅&#10;[00&#58;28&#46;48]阁楼里&#32;仔细听&#10;[00&#58;29&#46;60]仔细听&#32;叮叮叮&#10;[00&#58;30&#46;73]什么声音&#10;[00&#58;31&#46;66]乖乖睡&#32;不要怕&#32;听我说&#10;[00&#58;34&#46;02]乖乖睡&#32;醒来就&#32;吃苹果&#10;[00&#58;36&#46;06]不睡觉&#32;的时候&#32;有传说&#10;[00&#58;38&#46;33]会有人&#32;咬你的&#32;小指头&#10;[00&#58;40&#46;69]这故事&#32;继续翻页&#32;再翻页&#10;[00&#58;43&#46;00]你继续&#32;不想睡&#32;我却想睡&#10;[00&#58;45&#46;32]然后我准备去打开衣柜&#10;[00&#58;47&#46;22]去看看&#32;躲着谁&#10;[00&#58;48&#46;42]去看看&#32;躲着谁&#10;[00&#58;49&#46;43]纸上的城堡卡片&#10;[00&#58;50&#46;60]发光的立体呈现&#10;[00&#58;51&#46;73]奇幻的床边故事&#10;[00&#58;52&#46;88]动听的令人称羡&#10;[00&#58;54&#46;02]场景瞬间变化&#10;[00&#58;55&#46;03]我接着又施展魔法&#10;[00&#58;56&#46;28]活过来说话&#10;[00&#58;57&#46;02]准备开始吧&#10;[00&#58;57&#46;89]等天黑一起倒数后关上灯&#10;[01&#58;01&#46;11]三二一&#32;入梦境的缤纷&#10;[01&#58;03&#46;72]我们并非正常人&#10;[01&#58;05&#46;61]游戏怎么会照剧本&#32;oh&#10;[01&#58;08&#46;01]天黑一起来关上灯&#10;[01&#58;10&#46;02]三二一&#32;进自由的灵魂&#10;[01&#58;12&#46;59]Ohohohoh&#32;oh&#32;come&#32;on&#10;[01&#58;14&#46;93]再回童年&#32;敲敲门&#10;[01&#58;16&#46;72]&#10;[01&#58;37&#46;54]滴哒滴哒突然开始摆动&#10;[01&#58;39&#46;61]墙上老挂钟&#10;[01&#58;40&#46;39]古董油画出现诡异的笑容&#10;[01&#58;41&#46;78]好的巫婆坏掉的苹果&#10;[01&#58;42&#46;98]愿望要跟谁说&#10;[01&#58;43&#46;80]旋转的音乐盒&#10;[01&#58;44&#46;66]我竖起耳朵听&#10;[01&#58;45&#46;39]这不会是一场梦&#10;[01&#58;46&#46;35]&#10;[01&#58;50&#46;52]Oh&#32;梦&#32;一下子瞬间跳跃&#10;[01&#58;56&#46;69]&#10;[01&#58;58&#46;82]我翻阅下个世界&#10;[02&#58;01&#46;10]&#10;[02&#58;03&#46;29]满满都是蝴蝶&#10;[02&#58;04&#46;71]森林满满蝴蝶&#10;[02&#58;05&#46;74]窗外纷飞着雪&#10;[02&#58;06&#46;65]一觉醒来旁边躺着是谁&#10;[02&#58;09&#46;27]这故事&#32;继续翻页&#32;再翻页&#10;[02&#58;11&#46;41]你继续&#32;不想睡&#32;我却想睡&#10;[02&#58;13&#46;55]然后我准备去打开衣柜&#10;[02&#58;15&#46;85]去看看&#32;躲着谁&#10;[02&#58;16&#46;82]去看看&#32;躲着谁&#10;[02&#58;17&#46;73]纸上的城堡卡片&#10;[02&#58;18&#46;84]发光的立体呈现&#10;[02&#58;20&#46;03]奇幻的床边故事&#10;[02&#58;21&#46;17]动听的令人称羡&#10;[02&#58;22&#46;29]场景瞬间变化&#10;[02&#58;23&#46;33]我接着又施展魔法&#10;[02&#58;24&#46;66]活过来说话&#10;[02&#58;25&#46;43]准备开始吧&#10;[02&#58;26&#46;23]等天黑一起倒数后关上灯&#10;[02&#58;29&#46;50]三二一&#32;入梦境的缤纷&#10;[02&#58;31&#46;34]&#10;[02&#58;31&#46;96]我们并非正常人&#10;[02&#58;33&#46;90]游戏怎么会照剧本&#32;oh&#10;[02&#58;36&#46;37]天黑一起来关上灯&#10;[02&#58;38&#46;44]三二一&#32;进自由的灵魂&#10;[02&#58;40&#46;54]Ohohohoh&#32;oh&#32;come&#32;on&#10;[02&#58;43&#46;26]再回童年&#32;敲敲门&#10;[02&#58;45&#46;33]乖乖睡啊&#32;不要害怕&#10;[02&#58;47&#46;50]乖乖睡醒来就吃苹果啊&#10;[02&#58;49&#46;76]不睡觉啊&#32;有传说啊&#10;[02&#58;51&#46;96]会有人咬你的小指头啊&#10;[02&#58;54&#46;02]等天黑一起倒数后关上灯&#10;[02&#58;56&#46;65]三二一&#32;入梦境的缤纷&#10;[02&#58;59&#46;11]我们并非正常人&#10;[03&#58;00&#46;83]游戏怎么会照剧本&#32;oh&#10;[03&#58;03&#46;63]天黑一起来关上灯&#10;[03&#58;05&#46;64]三二一&#32;进自由的灵魂&#10;[03&#58;08&#46;17]Ohohohoh&#32;oh&#32;come&#32;on&#10;[03&#58;10&#46;47]再回童年&#32;敲敲门&#10;[03&#58;12&#46;21]&#10;[03&#58;19&#46;46]再回童年&#32;敲敲门&#10;[03&#58;21&#46;32]&#10;[03&#58;28&#46;40]再回童年&#32;敲敲门"
    html_parser = HTMLParser.HTMLParser()
    txt = html_parser.unescape(html)
    print(txt)
    return txt

# 打开/创建一个文件
def saveFile(html):
    fo = open("../songs/foo.txt", "wb")
    print("文件名: ", fo.name)
    fo.write(html)
    # 关闭打开的文件
    fo.close()
if __name__ == '__main__':
    saveFile(htmlparser())